

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Factory Pattern &mdash; hfdpcpp_s 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../underscore.js"></script>
    <script type="text/javascript" src="../../doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../theme_extras.js"></script>
    <link rel="top" title="hfdpcpp_s 0.1 documentation" href="../../../index.html" />
    <link rel="next" title="Builder Pattern" href="../Builder/README.html" />
    <link rel="prev" title="Singleton Pattern" href="../Singleton/README.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../../../index.html">
          <span>hfdpcpp_s 0.1 documentation</span></a></h1>
        <h2 class="heading"><span>Factory Pattern</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="../Singleton/README.html">Singleton Pattern</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../Builder/README.html">Builder Pattern</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="factory-pattern">
<h1>Factory Pattern<a class="headerlink" href="#factory-pattern" title="Permalink to this headline">¶</a></h1>
<div class="section" id="test">
<h2>Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h2>
<p>This project uses cmake so wide range of OSes are supported. For ubuntu, you can
compile as shown below:</p>
<div class="highlight-python"><pre>mkdir build_Pizzaaf
cd build_Pizzaaf/
cmake ../Pizzaaf/
make
./driver/testpizzaaf

mkdir build_Pizzafm
cd build_Pizzafm/
cmake ../Pizzafm/
make
./driver/testpizzafm

mkdir build_Pizzaas
cd build_Pizzaas/
cmake ../Pizzaas/
make
./driver/testpizzaas</pre>
</div>
<div class="section" id="simple-static-factory-method">
<h3>Simple Static Factory Method<a class="headerlink" href="#simple-static-factory-method" title="Permalink to this headline">¶</a></h3>
<p>간단한 팩토리 - 패턴 장려상</p>
</div>
</div>
<div class="section" id="class-diagram">
<h2>Class Diagram<a class="headerlink" href="#class-diagram" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../../_images/Overview_of_SimpleFactory.jpg"><img alt="Class Diagram" src="../../../_images/Overview_of_SimpleFactory.jpg" style="width: 433.0px; height: 263.5px;" /></a>
</div>
<div class="section" id="sequence-diagram">
<h2>Sequence Diagram<a class="headerlink" href="#sequence-diagram" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../../_images/SequenceDiagram19.jpg"><img alt="Sequence Diagram" src="../../../_images/SequenceDiagram19.jpg" style="width: 251.0px; height: 300.0px;" /></a>
<p>SimplePizzaFactory 클래스는 팩토리로써 위 애플리케이션에서 유일하게 Pizza 의
구상클래스를 직접 참조하는 부분이다.</p>
<p><strong>이런 메소드(SimplePizzaFactory::createPizza())를 static 메소드로 선언하는
경우가 종종 있다.</strong></p>
<div class="section" id="factory-method">
<h3>Factory Method<a class="headerlink" href="#factory-method" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id1">
<h2>Class Diagram<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../../_images/Overview_of_FactoryMethod.jpg"><img alt="Class Diagram" src="../../../_images/Overview_of_FactoryMethod.jpg" style="width: 446.5px; height: 350.0px;" /></a>
</div>
<div class="section" id="id2">
<h2>Sequence Diagram<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../../_images/SequenceDiagram110.jpg"><img alt="Sequence Diagram" src="../../../_images/SequenceDiagram110.jpg" style="width: 280.0px; height: 290.5px;" /></a>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">패턴 4. 팩토리 메소드</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>객체를 생성하기 위한 인터페이스를 정의하는데, 어떤 클래스의 인스턴스를
만들지는 서브클래스에서 결정하게 만든다. 팩토리 메소드 패턴을 이용하면
클래스의 인스턴스를 만드는 일을 서브클래스에게 맏기게 된다.</td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="../../../_images/FactoryMethod.jpg"><img alt="A Facade" src="../../../_images/FactoryMethod.jpg" style="width: 122.0px; height: 202.0px;" /></a>
<p>Q : 간단한 팩토리와 팩토리 메소드 패턴의 차이점</p>
<p>A : 간단한 팩토리는 1회용 처방에 불과한 반면, 팩토리 메소드 패턴을 사용하면 어떤
구현을 사용할지를 서브클래스에서 결정하는 프레임워크를 만들 수 있다는 결정적인
차이점이 있다. 예를 들어, 팩토리 메소드 패턴에서 사용한 orderPizza() 메소드에서는
피자를 만들기 위한 일반적인 프레임워크를 제공한다. 그 프레임워크에서는 팩토리
메소드를 사용하여 구상클래스의 객체를 생성한다. PizzaStore 클래스의 서브클래스를
만들 때, 어떤 구상 제품 클래스로부터 orderPizza() 에서 리턴할 피자를 만들지
결정하게 된다. 간단한 팩토리에서는 객체 생성을 캡슐화 하기는 하지만 팩토리 메소드
패턴처럼 강력한 유연성을 지닌 프레임워크를 제공하진 못한다. 생성하는 제품을
마음대로 변경할 수 없기 때문이다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">디자인 원칙 - 의존성 뒤집기 (Dependency Inversion Principle)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>추상화된 것에 의존하도록 만들어라. 구상 클래스에 의존하도록 만들지 않도록
한다.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><strong>어떤 변수에도 구상 클래스에 대한 레퍼런스를 저장하지 말라</strong></li>
</ul>
<p>new 연산자를 사용하면 구상 클래스에 대한 레퍼런스를 사용하게 되는 것이다.
팩토리를 써서 구상 클래스에 대한 레퍼런스를 변수에 저장하는 일을 미리 방지하라.</p>
<ul class="simple">
<li><strong>구상 클래스에서 유도된 클래스를 만들지 말라</strong></li>
</ul>
<p>구상 클래스에서 유도된 클래스를 만들면 특정 구상 클래스에 의존하게 된다.
인터페이스나 추상클래스처럼 추상화된 것으로부터 클래스를 만들어야 한다.</p>
<ul class="simple">
<li><strong>베이스 클래스에 이미 구현되어 있던 메소드를 오버라이드하지 말라</strong></li>
</ul>
<p>이미 구현되어있는 메소드를 오버라이드한다는 것은 애초부터 베이스클래스가 제대로
추상화된 것이 아니었다고 볼 수 있다. 베이스 클래스에서 메소드를 정의할 때는 모든
서브 클래스에서 공유할 수 있는 것만 정의해야 한다.</p>
<p><em>물론 이는 가이드라인일 뿐이다. 합당한 이유가 있는 경우에는 의도적으로 이
가이드라인을 지키지 않기로 선택할 수 있다.
예를 들면, 자바의 String 클래스와 같은 경우 거의 변경이 발생하지 않을 것으로
예상되므로 팩토리를 사용하지 않고 직접 만들어서 사용할 수 있는 것이다!</em></p>
<p><strong>OCP(Open-Closed Principle)</strong></p>
<a class="reference internal image-reference" href="../../../_images/OCP_in_FactoryMethod.jpg"><img alt="Class Diagram" src="../../../_images/OCP_in_FactoryMethod.jpg" style="width: 185.5px; height: 202.0px;" /></a>
<p>책에서 설명하지 않는 내용이지만 Factory Method 패턴에서는 <strong>OCP
(Open-Closed Principle)</strong> 을 발견할 수 있다. 위 그림의 우측편의 의존관계는 책에서
설명하지 않지만 중요해 보인다. 즉, 이는 변화에 <tt class="docutils literal"><span class="pre">닫힌(Closed)</span></tt> <strong>프레임워크</strong> 를
구현한다. 반면, 위 그림의 좌측편의 의존관계는 하나의 구상클래스가 다른
구상클래스를 생성하는 의존관계인데 이는 새로운 확장에 <tt class="docutils literal"><span class="pre">열려(Open)</span></tt> 있어
<strong>어플리케이션</strong> 에서 마음대로 새로운 내용을 추가할 수 있다. 이는 위의
PizzaStore의 클래스 다이어그램에서도 PizzaStore 와 Pizza 간의 의존관계가 생략되어
있으며 이를 포함해 동일하게 설명할 수 있다.</p>
<div class="section" id="abstract-factory">
<h3>Abstract Factory<a class="headerlink" href="#abstract-factory" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id3">
<h2>Class Diagram<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../../_images/Overview_of_AbstractFactory.jpg"><img alt="Class Diagram" src="../../../_images/Overview_of_AbstractFactory.jpg" style="width: 726.0px; height: 753.5px;" /></a>
<ul class="simple">
<li><strong>PizzaIngredientFactory</strong> : <tt class="docutils literal"><span class="pre">Abstract</span> <span class="pre">Factory</span></tt> in Abstract Factory Pattern</li>
<li><strong>PizzaStore</strong> : <tt class="docutils literal"><span class="pre">Creator</span></tt> in Factory Method Pattern</li>
<li><strong>각 구상 Pizza 클래스들</strong> : <tt class="docutils literal"><span class="pre">Client</span></tt> in Abstract Factory Pattern</li>
</ul>
</div>
<div class="section" id="id4">
<h2>Sequence Diagram<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../../_images/SequenceDiagram111.jpg"><img alt="Sequence Diagram" src="../../../_images/SequenceDiagram111.jpg" style="width: 446.0px; height: 366.0px;" /></a>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">패턴 5. 추상 팩토리</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>인터페이스를 이용하여 서로 연관된, 또는 의존하는 객체를 구상 클래스를 지정하지
않고도 생성할 수 있다.</td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="../../../_images/AbstractFactory.jpg"><img alt="A Facade" src="../../../_images/AbstractFactory.jpg" style="width: 373.0px; height: 203.0px;" /></a>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">팩토리 메소드 패턴</th>
<th class="head">추상 팩토리 패턴</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>상속한 팩토리클래스를 사용해서 객체
생성</td>
<td>전달받은(구성) 팩토리객체를 사용해서
객체 생성</td>
</tr>
<tr class="row-odd"><td>간단한 인터페이스 - 하나의 팩토리
메소드 - <strong>장점</strong></td>
<td>제품 군을 생성 - 인터페이스가 큰 편,
팩토리가 생성하는 제품군에 제품을
추가하는 경우 인터페이스의 변경이
불가피하다. - <strong>단점</strong></td>
</tr>
<tr class="row-even"><td colspan="2">객체 생성을 캡슐화해서 애플리케이션의 결합을 느슨하게 만들고, 특정 구현에 덜
의존하도록 만들 수 있음.</td>
</tr>
</tbody>
</table>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="../Singleton/README.html">Singleton Pattern</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../Builder/README.html">Builder Pattern</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2013, Journeyer J. Joh.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>